{"version":3,"sources":["context/reducer.js","context/store.js","components/HomeButton.js","components/Comics.js","pages/CharacterDetails.js","components/CharacterCard.js","hooks/usePageBottom.js","pages/Home.js","pages/NotFound.js","App.js","index.js"],"names":["Reducer","state","action","type","characters","concat","payload","offset","maxOffset","initialState","Context","createContext","Store","children","useReducer","dispatch","Provider","value","HomeButton","character","to","id","className","icon","faHome","style","color","Comics","characterID","useState","comics","setComics","isLoading","setLoading","errorMsg","setErrorMsg","fetchComics","a","today","Date","toISOString","split","dateToSend","url","process","fetch","response","ok","message","status","Error","json","data","results","map","comic","title","slice","console","log","useEffect","length","idx","CharacterDetails","setCharacter","useParams","useContext","filter","parseInt","name","src","thumbnail","path","extension","alt","description","CharacterCard","imgSrc","height","usePageBottom","bottom","setBottom","handleScroll","isBottom","window","innerHeight","pageYOffset","document","body","offsetHeight","addEventListener","removeEventListener","Home","isPageBottom","fetchCharacters","Math","ceil","total","textAlign","marginTop","NotFound","App","exact","component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5bb11adf.chunk.js","sourcesContent":["const Reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"GET_CHARACTERS\":\r\n      return {\r\n        ...state,\r\n        characters: state.characters.concat(action.payload),\r\n      };\r\n    case \"SET_OFFSET\":\r\n      if (state.offset < 1 || (state.maxOffset && (state.offset > state.maxOffset))) {\r\n        return;\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        offset: action.payload,\r\n      };\r\n    case \"SET_MAX_OFFSET\":\r\n      return {\r\n        ...state,\r\n        maxOffset: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default Reducer;\r\n","import React, { createContext, useReducer } from \"react\";\r\nimport Reducer from \"./reducer\";\r\n\r\nconst initialState = {\r\n  offset: 1,\r\n  characters: [],\r\n  maxOffset: null\r\n};\r\n\r\nconst Store = ({ children }) => {\r\n  const [state, dispatch] = useReducer(Reducer, initialState);\r\n  return (\r\n    <Context.Provider value={[state, dispatch]}>{children}</Context.Provider>\r\n  );\r\n};\r\n\r\nexport const Context = createContext(initialState);\r\nexport default Store;\r\n","import React from \"react\";\r\nimport { HashLink as Link } from \"react-router-hash-link\";\r\nimport { faHome } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nconst HomeButton = ({ character }) => {\r\n  return !character ? (\r\n    <Link to=\"/marvel-showcase/\" className=\"home-button\">\r\n      <FontAwesomeIcon icon={faHome} style={{ color: \"#daddd8\" }} />\r\n      <span>Go back Home</span>\r\n    </Link>\r\n  ) : (\r\n    <Link to={`/marvel-showcase/#${character.id}`} className=\"home-button\">\r\n      <FontAwesomeIcon icon={faHome} style={{ color: \"#daddd8\" }} />\r\n      <span>Go back Home</span>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default HomeButton;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\n// previously I used a regex to match the comics from the info we already had but this is less error prone\r\nconst Comics = ({ characterID }) => {\r\n  const API_KEY = process.env.REACT_APP_MARVEL_API_KEY;\r\n  const [comics, setComics] = useState(null);\r\n  const [isLoading, setLoading] = useState(true);\r\n  const [errorMsg, setErrorMsg] = useState(null);\r\n\r\n  const fetchComics = async () => {\r\n    try {\r\n      const startDate = \"2015-01-01\";\r\n      const today = new Date().toISOString().split(\"T\", 1)[0];\r\n      const dateToSend = `${startDate}%2C${today}`;\r\n      const url = `https://gateway.marvel.com:443/v1/public/characters/${characterID}/comics?format=comic&formatType=comic&dateRange=${dateToSend}&orderBy=-onsaleDate&apikey=${API_KEY}`;\r\n      const response = await fetch(url);\r\n\r\n      if (!response.ok) {\r\n        const message = `An error has occured: ${response.status}`;\r\n        throw new Error(message);\r\n      }\r\n\r\n      const json = await response.json();\r\n\r\n      const comics = json.data.results.map((comic) => comic.title);\r\n      setComics(comics.slice(0, 10));\r\n      setLoading(false);\r\n    } catch (err) {\r\n      console.log(err)\r\n      setErrorMsg(\"There was a problem with the service.\")\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchComics();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {errorMsg && <p>{errorMsg}</p>}\r\n      {isLoading ? (\r\n        <p>Loading Comics</p>\r\n      ) : comics.length === 0 ? (\r\n        <p>No comics to show</p>\r\n      ) : (\r\n        comics.map((comic, idx) => <div key={idx}>{comic}</div>)\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comics;\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Context } from \"../context/store\";\r\nimport HomeButton from \"../components/HomeButton\";\r\nimport Comics from \"../components/Comics\";\r\n\r\nconst CharacterDetails = () => {\r\n  const [character, setCharacter] = useState(null);\r\n  const { characterID } = useParams();\r\n  const [{ characters }] = useContext(Context);\r\n\r\n  useEffect(() => {\r\n    const filtered = characters.filter(\r\n      (character) => character.id === parseInt(characterID)\r\n    );\r\n    const character = filtered[0];\r\n\r\n    setCharacter(character);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"main-div\">\r\n      <HomeButton character={character} />\r\n      {!character ? (\r\n        <p className=\"error-message\">\r\n          There is no info for this Marvel Character\r\n        </p>\r\n      ) : (\r\n        <div className=\"hero-details\">\r\n          <h2>{character.name}</h2>\r\n          <img\r\n            src={`${character.thumbnail.path}.${character.thumbnail.extension}`}\r\n            alt={character.name}\r\n            className=\"hero-image\"\r\n          />\r\n          <p>{character.description}</p>\r\n          <Comics characterID={character.id} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CharacterDetails;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst CharacterCard = ({ id, name, imgSrc }) => {\r\n  return (\r\n    <Link to={`/character/${id}`} id={id} className=\"card\">\r\n      <h2>{name}</h2>\r\n      <img src={imgSrc} alt={name} height=\"250px\" />\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default CharacterCard;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nconst usePageBottom = () => {\r\n  const [bottom, setBottom] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // check if the user has reached the bottom of the page\r\n    function handleScroll() {\r\n      const isBottom =\r\n        window.innerHeight + window.pageYOffset >=\r\n        document.body.offsetHeight - 2;\r\n      setBottom(isBottom);\r\n    }\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n\r\n    // remove the scroll event if user moves away from the page\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  return bottom;\r\n};\r\n\r\nexport default usePageBottom;\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { Context } from \"../context/store\";\r\nimport CharacterCard from \"../components/CharacterCard\";\r\nimport usePageBottom from \"../hooks/usePageBottom\";\r\n\r\nconst Home = () => {\r\n  const API_KEY = process.env.REACT_APP_MARVEL_API_KEY;\r\n  const [{ offset, characters, maxOffset }, dispatch] = useContext(Context);\r\n  const isPageBottom = usePageBottom();\r\n  //const [characters, setCharacters] = useState([]);\r\n\r\n  const fetchCharacters = async () => {\r\n    const response = await fetch(\r\n      `https://gateway.marvel.com:443/v1/public/characters?offset=${\r\n        (offset - 1) * 30\r\n      }&limit=30&apikey=${API_KEY}`\r\n    );\r\n\r\n    if (!response.ok) {\r\n      const message = `An error has occured: ${response.status}`;\r\n      throw new Error(message);\r\n    }\r\n\r\n    const json = await response.json();\r\n\r\n    if (!maxOffset) {\r\n      dispatch({type: \"SET_MAX_OFFSET\", payload: Math.ceil(json.data.total / 30)})\r\n    }\r\n\r\n    dispatch({ type: \"GET_CHARACTERS\", payload: json.data.results });\r\n  };\r\n\r\n  // using the pageBottom hook to change offset and get more content\r\n  useEffect(() => {\r\n    if (isPageBottom) {\r\n      console.log(offset + 1);\r\n      dispatch({ type: \"SET_OFFSET\", payload: offset + 1 });\r\n    }\r\n  }, [isPageBottom]);\r\n\r\n  // check if we are at the bottom of the page and the offset changed so we load more characters\r\n  // basically a fetchMore function\r\n  useEffect(() => {\r\n    if (isPageBottom) {\r\n      fetchCharacters();\r\n    }\r\n  }, [offset]);\r\n\r\n  // if there are no characters loaded we want to fetch the initial characters\r\n  useEffect(() => {\r\n    if (!characters || !characters.length) {\r\n      fetchCharacters();\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"main-div\">\r\n      <h1 style={{ textAlign: \"center\" }}>Marvel Characters</h1>\r\n      <div className=\"wrapper\">\r\n        {characters.length === 0 ? (\r\n          <p>Loading...</p>\r\n        ) : (\r\n          characters.map((character) => (\r\n            <CharacterCard\r\n              key={character.id}\r\n              id={character.id}\r\n              name={character.name}\r\n              imgSrc={`${character.thumbnail.path}.${character.thumbnail.extension}`}\r\n            />\r\n          ))\r\n        )}\r\n      </div>\r\n      <footer style={{ textAlign: \"center\", marginTop: \"20px\" }}>\r\n        \"Data provided by Marvel. © 2014 Marvel\"\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n// generic not found (404) page for unknown routes\r\nconst NotFound = () => {\r\n  return (\r\n    <div className=\"main-div\">\r\n      <p className=\"error-message\">You have stumbled onto something you shouldn't have.</p>\r\n      <Link to=\"/\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Store from \"./context/store\";\nimport CharacterDetails from \"./pages/CharacterDetails\";\nimport Home from \"./pages/Home\";\nimport NotFound from './pages/NotFound'\nimport \"./App.css\";\n\nconst App = () => {\n  return (\n    <Store>\n      <Router>\n        <Switch>\n          <Route exact path=\"/marvel-showcase/\" component={Home} />\n          <Route path=\"/marvel-showcase/character/:characterID\" component={CharacterDetails} />\n          <Route component={NotFound} />\n        </Switch>\n      </Router>\n    </Store>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}