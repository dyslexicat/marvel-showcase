(this["webpackJsonpmarvel-showcase"]=this["webpackJsonpmarvel-showcase"]||[]).push([[0],{39:function(e,t,c){},40:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(0),r=c.n(n),s=c(24),o=c.n(s),i=c(9),j=c(3),l=c(5),u=c(11),h=function(e,t){switch(t.type){case"GET_CHARACTERS":return Object(u.a)(Object(u.a)({},e),{},{characters:e.characters.concat(t.payload)});case"SET_OFFSET":if(e.offset<1||e.maxOffset&&e.offset>e.maxOffset)return;return Object(u.a)(Object(u.a)({},e),{},{offset:t.payload});case"SET_MAX_OFFSET":return Object(u.a)(Object(u.a)({},e),{},{maxOffset:t.payload});default:return e}},d={offset:1,characters:[],maxOffset:null},b=Object(n.createContext)(d),f=function(e){var t=e.children,c=Object(n.useReducer)(h,d),r=Object(l.a)(c,2),s=r[0],o=r[1];return Object(a.jsx)(b.Provider,{value:[s,o],children:t})},O=c(17),m=c(22),p=c(20),x=function(e){var t=e.character;return t?Object(a.jsxs)(O.HashLink,{to:"/marvel-showcase/#".concat(t.id),className:"home-button",children:[Object(a.jsx)(p.a,{icon:m.a,style:{color:"#daddd8"}}),Object(a.jsx)("span",{children:"Go back Home"})]}):Object(a.jsxs)(O.HashLink,{to:"/marvel-showcase/",className:"home-button",children:[Object(a.jsx)(p.a,{icon:m.a,style:{color:"#daddd8"}}),Object(a.jsx)("span",{children:"Go back Home"})]})},v=c(12),w=c.n(v),g=c(14),y=function(e){var t=e.characterID,c=Object(n.useState)(null),r=Object(l.a)(c,2),s=r[0],o=r[1],i=Object(n.useState)(!0),j=Object(l.a)(i,2),u=j[0],h=j[1],d=Object(n.useState)(null),b=Object(l.a)(d,2),f=b[0],O=b[1],m=function(){var e=Object(g.a)(w.a.mark((function e(){var c,a,n,r,s,i,j;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"2015-01-01",c=(new Date).toISOString().split("T",1)[0],a="".concat("2015-01-01","%2C").concat(c),n="https://gateway.marvel.com:443/v1/public/characters/".concat(t,"/comics?format=comic&formatType=comic&dateRange=").concat(a,"&orderBy=-onsaleDate&apikey=").concat("4025ae459d5168fb3e0539a685b87a03"),e.next=7,fetch(n);case 7:if((r=e.sent).ok){e.next=11;break}throw s="An error has occured: ".concat(r.status),new Error(s);case 11:return e.next=13,r.json();case 13:i=e.sent,j=i.data.results.map((function(e){return e.title})),o(j.slice(0,10)),h(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0),O("There was a problem with the service.");case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m()}),[]),Object(a.jsxs)("div",{children:[f&&Object(a.jsx)("p",{children:f}),u?Object(a.jsx)("p",{children:"Loading Comics"}):0===s.length?Object(a.jsx)("p",{children:"No comics to show"}):s.map((function(e,t){return Object(a.jsx)("div",{children:e},t)}))]})},E=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),c=t[0],r=t[1],s=Object(j.m)().characterID,o=Object(n.useContext)(b),i=Object(l.a)(o,1)[0].characters;return Object(n.useEffect)((function(){var e=i.filter((function(e){return e.id===parseInt(s)}))[0];r(e)}),[]),Object(a.jsxs)("div",{className:"main-div",children:[Object(a.jsx)(x,{character:c}),c?Object(a.jsxs)("div",{className:"hero-details",children:[Object(a.jsx)("h2",{children:c.name}),Object(a.jsx)("img",{src:"".concat(c.thumbnail.path,".").concat(c.thumbnail.extension),alt:c.name,className:"hero-image"}),Object(a.jsx)("p",{children:c.description}),Object(a.jsx)(y,{characterID:c.id})]}):Object(a.jsx)("p",{className:"error-message",children:"There is no info for this Marvel Character"})]})},S=function(e){var t=e.id,c=e.name,n=e.imgSrc;return Object(a.jsxs)(i.Link,{to:"/character/".concat(t),id:t,className:"card",children:[Object(a.jsx)("h2",{children:c}),Object(a.jsx)("img",{src:n,alt:c,height:"250px"})]})},k=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){function e(){var e=window.innerHeight+window.pageYOffset>=document.body.offsetHeight-2;a(e)}return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),c},T=function(){var e=Object(n.useContext)(b),t=Object(l.a)(e,2),c=t[0],r=c.offset,s=c.characters,o=c.maxOffset,i=t[1],j=k(),u=function(){var e=Object(g.a)(w.a.mark((function e(){var t,c,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://gateway.marvel.com:443/v1/public/characters?offset=".concat(30*(r-1),"&limit=30&apikey=").concat("4025ae459d5168fb3e0539a685b87a03"));case 2:if((t=e.sent).ok){e.next=6;break}throw c="An error has occured: ".concat(t.status),new Error(c);case 6:return e.next=8,t.json();case 8:a=e.sent,o||i({type:"SET_MAX_OFFSET",payload:Math.ceil(a.data.total/30)}),i({type:"GET_CHARACTERS",payload:a.data.results});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){j&&(console.log(r+1),i({type:"SET_OFFSET",payload:r+1}))}),[j]),Object(n.useEffect)((function(){j&&u()}),[r]),Object(n.useEffect)((function(){s&&s.length||u()}),[]),Object(a.jsxs)("div",{className:"main-div",children:[Object(a.jsx)("h1",{style:{textAlign:"center"},children:"Marvel Characters"}),Object(a.jsx)("div",{className:"wrapper",children:0===s.length?Object(a.jsx)("p",{children:"Loading..."}):s.map((function(e){return Object(a.jsx)(S,{id:e.id,name:e.name,imgSrc:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension)},e.id)}))}),Object(a.jsx)("footer",{style:{textAlign:"center",marginTop:"20px"},children:'"Data provided by Marvel. \xa9 2014 Marvel"'})]})},N=function(){return Object(a.jsxs)("div",{className:"main-div",children:[Object(a.jsx)("p",{className:"error-message",children:"You have stumbled onto something you shouldn't have."}),Object(a.jsx)(i.Link,{to:"/"})]})},C=(c(39),function(){return Object(a.jsx)(f,{children:Object(a.jsx)(i.BrowserRouter,{children:Object(a.jsxs)(j.g,{children:[Object(a.jsx)(j.d,{exact:!0,path:"/marvel-showcase/",component:T}),Object(a.jsx)(j.d,{path:"/marvel-showcase/character/:characterID",component:E}),Object(a.jsx)(j.d,{component:N})]})})})});o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5bb11adf.chunk.js.map